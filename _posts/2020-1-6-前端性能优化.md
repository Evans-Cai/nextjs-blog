---
layout:     post
title:      前端性能优化总结
subtitle:   最全的前端性能优化总结 进阶
date:       2020-1-6 21:23:07
author:     gankai
header-img: img/vue.jpg
catalog: true
tags:
    - 性能优化
    - css
    - js

---

## css

### will-change

[w3规范](https://www.w3.org/TR/css-will-change/)

开发人员可以提前告知UA,这个元素可能发生什么变化，这样可以让UA提前有机会如何处理优化这个元素，提前做一些可能比较耗资源的动画的准备工作，在动画开始前完成准备。

这个属性有四个值：

- auto :实行标准浏览器优化。
- scroll-position :指名元素的滚动位置将会出现动画页面，浏览器应该为滚动视窗内容的不可见部分事先做好准备。
- contents: 指明元素的内容将会发生变化，浏览器不要缓存它们的内容。
- <custom-ident>: 指明will-change实施的目标属性，比如transform 或 opacity。



**然而，千万不要过度使用will-change属性，否则，事与愿违，页面的执行效率会降低，推荐的做法是当一个元素或属性发生变化时打开will-change，变化完成之后关闭它。** 

###  contain

[w3规范](https://www.w3.org/TR/css-contain-1/)

`contain`属性是让开发人员告诉浏览器，一个元素和它内部的内容，极有可能，不受页面上的其它内容影响，相对独立的存在。这可以让浏览器在生成这部分内容时能够正确的使用更进一步优化措施，开发人员也不用担心`contain`内容里的修改会影响页面其它部分的执行效率。

换句话说，如果你完全知道一个元素和它的子元素的一些事情，你应该告诉浏览器可以围绕着这些事情进行优化。例如，`contain: size;` – “这使得浏览器知道这个元素的布局时不需要检查它的子元素的状况。”



这个属性有七个值：

- none

  声明元素正常渲染，没有包含规则。

- strict

  声明所有的包含规则应用于这个元素。这样写等价于 `contain: size layout style paint。`

- content

  声明这个元素上有除了 size 外的所有包含规则。等价于 `contain: layout style paint。`

- size

  声明这个元素的尺寸计算不依赖于它的子孙元素的尺寸。

- layout

  声明没有外部元素可以影响它内部的布局，反之亦然。

- style

  声明那些同时会影响这个元素和其子孙元素的属性，都在这个元素的包含范围内。

- paint

  声明这个元素的子孙节点不会在它边缘外显示。如果一个元素在视窗外或因其他原因导致不可见，则同样保证它的子孙节点不会被显示。

  

**跟iframe非常相似，这个属性让元素建立了一个新布局的root框架，可以确保子节点上的DOM变化不会导致父容器的重新布局。**

#### 对于复杂动画效果,使用绝对定位让其脱离文档流



### css3硬件加速（GPU加速）



**1. 使用css3硬件加速，可以让transform、opacity、filters这些动画不会引起回流重绘 。**

**2. 对于动画的其它属性，比如background-color这些，还是会引起回流重绘的，不过它还是可以提升这些动画的性能。**



#### 如何使用

常见的触发硬件加速的css属性：

- transform
- opacity
- filters
- Will-change

---------

### 1
  <textarea readonly="true"
   cols="33" rows="11" 
   onmouseover="javascript:this.focus();this.select();">
    This text will be automagically highlighted upon focus..
 </textarea>
 <input length="77" value="This text will be highlighted upon focus.." 
 onmouseover="javascript:this.focus();this.select();" />

 我可以想象这个技巧几乎适用于任何元素-按钮，链接，随便你怎么说。使用以下代码，textarea当用户将鼠标悬停或聚焦于该区域时，内的内容将突出显示/选择。对于input元素，如果存在则将突出显示文本，如果不存在，则会出现闪烁的光标，随时可以使用。非常好 ;）

 -------