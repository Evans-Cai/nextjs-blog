---
layout:     post
title:      http协议原理
subtitle:   http协议原理学习记录心得总结
date:       2018-3-9 17:33:02
author:     gankai
header-img: img/vue.jpg
catalog: true
tags:
    - http
    - tcp
    - udp
---

# http协议原理

## 2018年3月9日00:24:49  001

<h1>http的三次握手是什么意思,为什么要有三次握手?</h1>
**答:**

  `为了防止服务端开启一些无用的链接,因为网络传送是有延时的,服务器开销的问题.中间可能隔了很长的距离(比如光纤,或者说各种代理服务器),在传送过程中,第一次握手,客户端发送一次创建链接的请求数据比如:`SYN = 1, Seq = X`,服务端接收到请求,创建链接,将数据(SYN = 1,ACK = X+1, Seq = Y)返回给客户端,但是,在这个传送过程中,数据可能会丢失,服务端不知道客户端是否接收到了数据,然后服务端就会将端口一直开着等待客户端的第三次握手,也就是说服务端会等待一段时间,如果一段时间之后,没有进行第三次握手,服务端就会将端口关掉,如果客户端没有接到服务端的第二次握手,就不会再次请求;`

  `weshak抓包工具`

  URL: 统一资源定位器;

  URI: 统一资源定位符;

  URN: 永久资源定位符(在资源移动之后, 还能被找到,目前还没有非常成熟的使用方案);

<h4>curl的使用</h4>

  在git bash 中 `crul baidu.com`查看,或者,crul -v www.baidu.com 看请求的所有报文的详细信息:
请求的:
      Trying 180.97.33.108...
    * TCP_NODELAY set
    * Connected to www.baidu.com (180.97.33.108) port 80 (#0)
    > GET / HTTP/1.1
    > Host: www.baidu.com
    > User-Agent: curl/7.63.0
    > Accept: */*
    >
返回的:

    < HTTP/1.1 200 OK
    < Accept-Ranges: bytes
    < Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
    < Connection: Keep-Alive
    < Content-Length: 2381
    < Content-Type: text/html
    < Date: Sat, 09 Mar 2019 11:17:45 GMT
    < Etag: "588604f8-94d"
    < Last-Modified: Mon, 23 Jan 2017 13:28:24 GMT
    < Pragma: no-cache
    < Server: bfe/1.0.8.18
    < Set-Cookie: BDORZ=27315; max-age=86400; domain=.baidu.com; path=/
    <


<h3>浏览器缓存相关 Cache-Control  客户端缓存的可缓存性</h3>

`public` 任何地方都能缓存,

`private`指定地方能缓存

`no-cache`没有缓存(你可以在本地进行缓存,不过需要经过服务器的验证同意)

`no-store` 永远都不能用缓存,只能每次都去服务器上获取新的数据;

`no-transform`告诉代理服务器不能随便进行压缩转换,改变内容;

`max-age=<seconds>` 缓存到期时间(秒为单位)

`s-maxage=<seconds>`只有设置带来的时候,才会走这个,缓存到期时间,这是专门为代理服务器设置的

`must-revalidate` 重新验证 `proxy-revalidate`缓存服务器中

以上头消息,非约束性的,可以按照这个规范去做,

    response.writeHead(200, {
         'Content-Type': 'text/javascript',
         'Cache-Control':'max-age=20,public'
     })
     response.end("console.log('script.js')")

***这也就是为什么前端请求数据的时候,url上会加上一串哈希码,为的是清空浏览器的缓存.***
